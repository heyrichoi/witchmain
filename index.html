<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>금단의 유혹: 마녀의 밤 공략집</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables for a dark, mysterious, and alluring palette */
        :root {
            --primary-purple: #8a2be2; /* Blue Violet - main accent */
            --dark-purple: #2c003e; /* Very dark purple for backgrounds */
            --medium-purple: #4a006a; /* Medium dark purple */
            --light-purple: #e0b0ff; /* Very light, mystical purple */
            --accent-red: #8b0000; /* Dark red for Lilia's seduction */
            --accent-blue: #1e90ff; /* Dodger Blue for Celine's purity */
            --accent-gold: #daa520; /* Goldenrod for Magic Power */
            --text-light: #e0e0e0; /* Light grey for main text */
            --text-dark: #b0b0b0; /* Slightly darker grey for secondary text */
            --shadow-dark: rgba(0, 0, 0, 0.5); /* Stronger shadow */
            --shadow-medium: rgba(0, 0, 0, 0.3); /* Medium shadow */
            --shadow-light: rgba(0, 0, 0, 0.1); /* Light shadow */
            --border-color: rgba(255, 255, 255, 0.15); /* Subtle border color */
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            color: var(--text-light);
            line-height: 1.7; /* Improved line height for readability */
            margin: 0;
            padding: 0 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            box-sizing: border-box;
            background: linear-gradient(135deg, var(--dark-purple) 0%, var(--medium-purple) 100%);
        }

        /* Blurred background image for the entire page */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://imgur.com/NIzVNZH.jpg'); /* Dark Forest background */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: blur(12px); /* More blur for mystical effect */
            opacity: 0.3; /* Softer opacity */
            z-index: -2;
        }

        /* Outer container for the two-column layout */
        .outer-container {
            display: flex;
            width: 100%;
            max-width: 1200px;
            margin: 50px auto;
            box-shadow: 0 30px 60px var(--shadow-dark); /* Stronger, larger shadow */
            border-radius: 40px;
            overflow: hidden;
            position: relative;
            z-index: 1;
            background-color: transparent;
            border: 1px solid var(--border-color); /* Subtle border */
        }

        /* Decorative background elements (now on outer-container) */
        .outer-container::before,
        .outer-container::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, var(--primary-purple) 0%, transparent 70%);
            opacity: 0.25; /* More visible mystical glow */
            filter: blur(60px); /* More blur for softer effect */
            z-index: -1;
        }

        .outer-container::before {
            top: -180px;
            left: -180px;
            width: 450px;
            height: 450px;
            animation: floatGlow 18s infinite ease-in-out;
        }

        .outer-container::after {
            bottom: -150px;
            right: -150px;
            width: 400px;
            height: 400px;
            animation: floatGlow 20s infinite ease-in-out reverse;
        }

        @keyframes floatGlow {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(70px, -70px) scale(1.2); }
            100% { transform: translate(0, 0) scale(1); }
        }

        /* Left Sidebar */
        .sidebar {
            flex: 0 0 320px; /* Wider sidebar */
            background: rgba(10, 0, 15, 0.95); /* Very dark, slightly transparent */
            padding: 50px 35px; /* Increased padding */
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 5px 0 25px var(--shadow-dark);
            border-top-left-radius: 40px;
            border-bottom-left-radius: 40px;
        }

        /* Header Styling in Sidebar */
        .sidebar header {
            text-align: center;
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 1px solid var(--border-color);
            width: 100%;
        }

        .game-logo {
            max-width: 220px;
            height: auto;
            margin-bottom: 25px;
            filter: drop-shadow(0 8px 15px var(--shadow-dark));
        }

        .sidebar header p {
            font-size: 0.9em;
            color: var(--text-dark);
            font-weight: 500;
        }

        /* Tab Navigation in Sidebar (Vertical Menu) */
        .tab-nav {
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 14px 25px;
            font-size: 0.95em;
            font-weight: 700;
            color: var(--light-purple);
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            margin: 6px 0;
            text-align: left;
            width: 100%;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }

        .tab-button:hover {
            background: rgba(138, 43, 226, 0.2); /* Semi-transparent purple */
            color: white;
            transform: translateX(10px);
            box-shadow: 0 6px 15px var(--shadow-medium);
        }

        .tab-button.active {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 10px 25px var(--shadow-dark);
            transform: translateX(20px);
            border: 1px solid var(--light-purple);
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            background: rgba(20, 0, 30, 0.9); /* Darker, more transparent */
            padding: 55px;
            border-top-right-radius: 40px;
            border-bottom-right-radius: 40px;
            box-shadow: -5px 0 25px var(--shadow-dark);
            border: 1px solid var(--border-color); /* Subtle border */
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.8s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Headings */
        h2 {
            color: var(--light-purple);
            font-size: 2.2em;
            margin-top: 45px;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 3px solid var(--primary-purple);
            position: relative;
            font-weight: 800;
            text-align: center;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
        }

        h3 {
            color: var(--primary-purple);
            font-size: 1.5em;
            margin-top: 35px;
            margin-bottom: 18px;
            font-weight: 700;
            border-left: 6px solid var(--light-purple);
            padding-left: 18px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        p {
            margin-bottom: 18px;
            font-size: 0.95em;
            color: var(--text-light);
        }

        /* Character Profile */
        .character-profile {
            background: rgba(255, 255, 255, 0.05); /* Very subtle transparent background */
            border-radius: 25px;
            padding: 35px;
            margin-bottom: 35px;
            box-shadow: 0 12px 30px var(--shadow-medium);
            display: flex; /* Keep flex for horizontal layout of image and text */
            flex-direction: row;
            align-items: flex-start;
            text-align: left;
            gap: 35px;
            border: 1px solid var(--border-color);
        }

        /* Direct image styling within character-profile */
        .character-profile > img { /* Target direct img child */
            width: 240px; /* Fixed width */
            height: 290px; /* Fixed height */
            object-fit: contain; /* Ensure entire image is visible, prevent cropping */
            display: block;
            border-radius: 20px;
            box-shadow: 0 10px 25px var(--shadow-dark);
            border: 3px solid var(--primary-purple); /* Frame for character image */
            flex-shrink: 0; /* Prevent image from shrinking */
        }

        .profile-info-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .profile-info-content h3 {
            font-size: 2.2em;
            color: var(--light-purple);
            margin-top: 0;
            margin-bottom: 15px;
            border-left: none;
            padding-left: 0;
            text-align: left;
        }

        .profile-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px 25px;
            width: 100%;
            max-width: none;
            margin-bottom: 25px;
        }

        .detail-item {
            font-size: 0.9em;
            color: var(--text-light);
        }

        .detail-item b {
            color: var(--light-purple);
            margin-right: 10px;
        }

        .profile-section-title {
            font-size: 1.3em;
            color: var(--primary-purple);
            font-weight: 700;
            margin-top: 25px;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            width: 100%;
            text-align: left;
        }

        /* Image Gallery */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .image-item {
            background: rgba(255, 255, 255, 0.03); /* Very subtle transparent background */
            border-radius: 20px;
            padding: 18px;
            box-shadow: 0 10px 25px var(--shadow-medium);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            cursor: pointer;
            border: 1px solid var(--border-color);
        }

        .image-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 30px var(--shadow-dark);
            background: rgba(255, 255, 255, 0.08);
        }

        .image-item img {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 3px solid var(--primary-purple);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .image-item p {
            font-size: 0.85em;
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 0;
        }

        /* Hidden Image Specifics */
        .hidden-image-container {
            position: relative;
            width: 100%;
            padding-bottom: 75%;
            overflow: hidden;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 3px solid var(--primary-purple);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .hidden-image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: blur(25px); /* More blur for hidden image */
            transition: filter 0.5s ease;
        }

        .hidden-image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 6em;
            color: var(--light-purple);
            font-weight: bold;
            text-shadow: 0 0 20px rgba(0,0,0,0.9);
            z-index: 2;
        }

        /* Lists */
        ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 25px;
        }

        ul li {
            background: rgba(255, 255, 255, 0.05); /* Subtle transparent background */
            margin-bottom: 12px;
            padding: 15px 25px;
            border-radius: 15px;
            border-left: 6px solid var(--primary-purple);
            box-shadow: 0 5px 15px var(--shadow-light);
            transition: background 0.3s ease, transform 0.2s ease;
            font-size: 0.95em;
            color: var(--text-light);
        }

        ul li:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        /* Tip Boxes */
        .tip-box {
            background: rgba(138, 43, 226, 0.15); /* Primary purple with transparency */
            border-radius: 25px;
            padding: 35px;
            margin-top: 35px;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px var(--shadow-medium);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--primary-purple);
        }

        .tip-box h3 {
            color: white;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.5);
            margin-bottom: 15px;
        }

        .tip-box p {
            color: #f0f0f0;
            font-size: 0.95em;
            margin-bottom: 15px;
        }

        .tip-box ul li {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--light-purple);
            color: #f0f0f0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            padding: 12px 18px;
            font-size: 0.9em;
        }
        .tip-box ul li:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(3px);
        }

        /* Ending Sections */
        .ending-section {
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            box-shadow: 0 10px 25px var(--shadow-medium);
            border: 1px solid var(--border-color);
        }

        .ending-section h3 {
            color: var(--light-purple);
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .ending-section p {
            text-align: center;
            font-style: italic;
            color: var(--text-dark);
            margin-bottom: 25px;
            font-size: 0.95em;
        }

        .ending-section .image-gallery {
            grid-template-columns: 1fr;
            max-width: 350px;
            margin: 25px auto;
        }
        .ending-section .image-item {
            background: rgba(255, 255, 255, 0.08);
            border: 3px solid var(--primary-purple);
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 45px;
            padding-top: 25px;
            border-top: 1px solid var(--border-color);
            color: var(--text-dark);
            font-size: 0.85em;
        }

        footer p {
            margin-bottom: 10px;
        }

        /* Image Overlay */
        #image-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            cursor: zoom-out;
            animation: fadeInOverlay 0.4s ease-out;
        }

        #image-overlay.active {
            display: flex;
        }

        #image-overlay img {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            border-radius: 20px;
            box-shadow: 0 0 50px var(--shadow-dark);
            animation: zoomIn 0.4s ease-out;
            border: 5px solid var(--primary-purple); /* Stronger border for overlay */
        }

        @keyframes fadeInOverlay {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from { transform: scale(0.6); opacity: 0.6; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Sparkle effect CSS (from previous guide, adjusted colors) */
        .sparkle {
            position: absolute;
            background-color: white; /* Default, will be overridden by JS */
            border-radius: 50%;
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
            animation: sparkle-fade-out 1s forwards;
            z-index: 9999;
        }

        @keyframes sparkle-fade-out {
            0% { opacity: 0; transform: scale(0); }
            20% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.5); }
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .outer-container {
                flex-direction: column;
                margin: 30px auto;
                width: 100%;
                border-radius: 25px;
            }

            .sidebar {
                flex: none;
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                border-top-left-radius: 25px;
                border-top-right-radius: 25px;
                border-bottom-left-radius: 0;
                box-shadow: 0 5px 15px var(--shadow-medium);
                padding: 35px 25px;
            }

            .sidebar header {
                margin-bottom: 35px;
                padding-bottom: 20px;
            }

            .game-logo {
                max-width: 180px;
            }

            .tab-nav {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                padding: 10px;
                border-radius: 15px;
            }

            .tab-button {
                flex-grow: 1;
                margin: 5px;
                width: auto;
                text-align: center;
                transform: none !important;
                box-shadow: none !important;
            }

            .tab-button.active {
                transform: none !important;
                box-shadow: 0 3px 10px var(--shadow-dark) !important;
            }
            .tab-button:hover {
                transform: none !important;
            }

            .main-content {
                padding: 40px;
                border-top-right-radius: 0;
                border-bottom-left-radius: 25px;
                border-bottom-right-radius: 25px;
                box-shadow: 0 -5px 15px var(--shadow-medium);
            }

            h2 {
                font-size: 1.8em;
                margin-top: 35px;
                margin-bottom: 18px;
            }

            h3 {
                font-size: 1.2em;
                margin-top: 28px;
                margin-bottom: 14px;
            }

            p {
                font-size: 0.85em;
            }

            .character-profile {
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 20px;
                padding: 25px;
            }
            /* Adjust direct image styling for smaller screens */
            .character-profile > img {
                width: 180px;
                height: 220px;
            }
            .profile-info-content h3 {
                text-align: center;
            }
            .profile-details {
                grid-template-columns: 1fr;
                gap: 10px;
                text-align: center;
            }
            .profile-section-title {
                text-align: center;
            }

            .image-gallery {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 18px;
            }

            .image-item {
                padding: 12px;
            }

            .hidden-image-overlay {
                font-size: 4.5em;
            }

            ul li {
                padding: 10px 18px;
                font-size: 0.85em;
            }

            .tip-box {
                padding: 25px;
            }

            .ending-section {
                padding: 22px;
            }
        }

        @media (max-width: 576px) {
            body {
                padding: 0 15px;
            }
            .outer-container {
                margin: 25px auto;
                width: 100%;
                border-radius: 20px;
            }

            .sidebar {
                padding: 25px 20px;
            }

            .game-logo {
                max-width: 140px;
            }

            .sidebar header p {
                font-size: 0.7em;
            }

            .tab-nav {
                padding: 8px;
            }
            .tab-button {
                padding: 8px 12px;
                font-size: 0.75em;
            }

            .main-content {
                padding: 25px;
            }

            h2 {
                font-size: 1.5em;
            }

            h3 {
                font-size: 1.1em;
            }

            p {
                font-size: 0.75em;
            }

            .character-profile {
                padding: 20px;
            }
            /* Adjust direct image styling for very small screens */
            .character-profile > img {
                width: 140px;
                height: 170px;
            }
            .profile-info-content h3 {
                font-size: 1.6em;
            }
            .detail-item {
                font-size: 0.75em;
            }

            .image-gallery {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .image-item {
                padding: 10px;
            }

            .hidden-image-overlay {
                font-size: 3.5em;
            }

            ul li {
                padding: 8px 12px;
                font-size: 0.7em;
            }

            .tip-box {
                padding: 20px;
            }

            .ending-section {
                padding: 18px;
            }
        }

        /* Password Modal Styles */
        .password-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001; /* Above image overlay */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .password-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .password-modal-content {
            background: linear-gradient(135deg, #1a002a, #3a005a);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            border: 1px solid var(--primary-purple);
            max-width: 350px;
            width: 90%;
        }

        .password-modal-content h3 {
            color: var(--light-purple);
            margin-bottom: 20px;
            font-size: 1.5em;
            border-left: none; /* Override general h3 style */
            padding-left: 0;
        }

        .password-modal-content input {
            width: calc(100% - 20px);
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid var(--primary-purple);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.1em;
            text-align: center;
            outline: none;
        }

        .password-modal-content input::placeholder {
            color: var(--text-dark);
        }

        .password-modal-content button {
            background: linear-gradient(145deg, var(--primary-purple), #6a0dad);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        .password-modal-content button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .password-modal-content .error-message {
            color: #ff6347; /* Tomato red */
            margin-top: 10px;
            font-size: 0.9em;
            height: 1.5em; /* Reserve space to prevent layout shift */
        }
    </style>
</head>
<body>
    <div class="outer-container">
        <aside class="sidebar">
            <header>
                <!-- 게임 로고 이미지 활용 -->
                <img src="https://imgur.com/wvwkRJr.jpg" alt="금단의 유혹: 마녀의 밤 로고" class="game-logo" onerror="this.onerror=null;this.src='https://placehold.co/220x220/330044/ffffff?text=Logo+Error';">
                <p>마녀들의 밤에 오신 것을 환영합니다. 당신의 운명을 선택하세요. 🌙</p>
            </header>

            <nav class="tab-nav">
                <button class="tab-button active" onclick="openTab(event, 'general-guide')">기본 공략</button>
                <button class="tab-button" onclick="openTab(event, 'belena-guide')">벨레나 공략</button>
                <button class="tab-button" onclick="openTab(event, 'lilia-guide')">릴리아 공략</button>
                <button class="tab-button" onclick="openTab(event, 'celine-guide')">셀린 공략</button>
                <button class="tab-button" onclick="openTab(event, 'endings')">모든 엔딩</button>
                <button class="tab-button" id="eroticGalleryButton">더 에로한 일러스트 확인하기</button>
            </nav>
        </aside>

        <main class="main-content">
            <div id="general-guide" class="tab-content active">
                <h2>게임의 핵심 요소</h2>
                <ul>
                    <li><b>지배력 (벨레나):</b> 벨레나와의 관계를 나타내는 수치입니다. 그녀의 지배적인 성향에 복종하거나 함께 힘을 추구할 때 상승합니다.</li>
                    <li><b>유혹력 (릴리아)::</b> 릴리아와의 관계를 나타내는 수치입니다. 그녀의 유혹에 빠져들거나 금지된 쾌락을 탐닉할 때 상승합니다.</li>
                    <li><b>순수도 (셀린):</b> 셀린과의 관계를 나타내는 수치입니다. 그녀의 순수함을 지키거나 치유의 손길을 받아들일 때 상승합니다.</li>
                    <li><b>마력:</b> 주인공의 전반적인 마법 능력과 마녀 세계 적응도를 나타냅니다. 마력이 낮으면 특정 엔딩에 도달하기 어렵습니다.</li>
                    <li><b>선택:</b> 당신의 모든 결정이 마녀들과의 관계, 스탯 변화, 그리고 최종 엔딩을 좌우합니다. 신중한 선택으로 원하는 운명을 만드세요!</li>
                </ul>

                <h2>공략 팁: 금단의 유혹을 지배하는 비법</h2>
                <div class="tip-box">
                    <h3>마녀별 공략 전략</h3>
                    <ul>
                        <li><b>벨레나:</b> 그녀의 강렬한 카리스마와 지배적인 성향을 이해하고 존중하세요. 그녀의 힘을 인정하고 복종하는 모습을 보이면 호감도가 크게 상승합니다. 때로는 그녀의 계획에 적극적으로 동참하는 것이 좋습니다.</li>
                        <li><b>릴리아:</b> 그녀의 치명적인 유혹에 이끌리되, 단순히 쾌락만을 쫓는 것이 아니라 그녀의 지적인 면모(금지된 지식 탐구)에도 관심을 보여주세요. 그녀의 비밀스러운 매력을 탐닉할수록 깊은 관계로 발전합니다.</li>
                        <li><b>셀린:</b> 그녀의 순수하고 여린 마음을 보호하고 지지해주세요. 그녀의 선의를 믿고 따르며, 그녀가 불안해할 때 든든한 버팀목이 되어주는 것이 중요합니다. 그녀의 치유 마법을 자주 경험하는 것도 좋습니다.</li>
                    </ul>
                </div>
                <div class="tip-box">
                    <h3>마력 관리 노하우</h3>
                    <ul>
                        <li>마력은 게임 진행에 필수적인 스탯입니다. 특정 선택지나 이벤트를 통해 마력을 회복하거나 증가시킬 수 있습니다.</li>
                        <li>마력이 너무 낮으면 배드 엔딩으로 이어질 수 있으니 항상 일정 수준 이상을 유지하세요.</li>
                        <li>마력이 높을수록 마녀들과의 관계에서 더 유리한 선택을 할 수 있습니다.</li>
                    </ul>
                </div>
                <div class="tip-box">
                    <h3>선택의 중요성과 엔딩 분기</h3>
                    <ul>
                        <li>각 선택은 특정 마녀의 스탯을 올리거나 내릴 수 있으며, 동시에 다른 마녀의 스탯에 영향을 줄 수도 있습니다.</li>
                        <li>하나의 마녀에게 집중하여 스탯을 극대화하면 해당 마녀의 해피 또는 에로 엔딩으로 이어질 가능성이 높습니다.</li>
                        <li>세 마녀의 스탯을 모두 높게 유지하고 마력까지 충분하다면, 숨겨진 트루 엔딩에 도전할 수 있습니다.</li>
                        <li>어떤 마녀에게도 집중하지 못하거나 스탯 관리에 실패하면 일반 배드 엔딩 또는 특정 마녀의 배드 엔딩으로 이어집니다.</li>
                    </ul>
                </div>
            </div>

            <div id="belena-guide" class="tab-content">
                <h2>🖤 벨레나 공략 가이드</h2>
                <div class="character-profile">
                    <img src="https://imgur.com/unTnIQB.jpg" alt="벨레나 프로필" onerror="this.onerror=null;this.src='https://placehold.co/240x290/330044/ffffff?text=Image+Error';">
                    <div class="profile-info-content">
                        <h3>벨레나 (Belena)</h3>
                        <div class="profile-details">
                            <div class="detail-item"><b>특성:</b> 지배, 카리스마, 힘</div>
                            <div class="detail-item"><b>마법:</b> 지배 마법, 계약 마법</div>
                            <div class="detail-item"><b>좋아하는 것:</b> 복종, 강한 의지, 명확한 목표, 힘의 추구.</div>
                            <div class="detail-item"><b>싫어하는 것:</b> 나약함, 우유부단함, 배신, 무의미한 저항.</div>
                        </div>
                        <p class="profile-section-title">벨레나 공략 포인트</p>
                        <p>벨레나는 강력한 지배력을 가진 마녀입니다. 그녀의 힘을 인정하고, 그녀의 뜻에 기꺼이 따르는 모습을 보여주세요. 그녀의 명령에 복종하고, 그녀의 야망을 함께 이룰 파트너가 되겠다고 다짐하면 그녀의 마음을 얻을 수 있습니다. 그녀의 차가운 외면 속에 숨겨진 뜨거운 욕망을 깨닫는 것이 중요합니다.</p>
                    </div>
                </div>

                <h3>벨레나 에피소드 일러스트</h3>
                <div class="image-gallery">
                    <div class="image-item">
                        <img src="https://imgur.com/uvBZwBa.jpg" alt="벨레나의 함정에 걸림" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>숲의 속박</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/TJQX9PS.jpg" alt="명계의 계약서" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>명계의 계약</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/9gf3RQj.jpg" alt="붉은 의식의 방" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>붉은 의식</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/uW2fEpz.jpg" alt="벨레나 지배의 카리스마" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>지배의 카리스마</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/3Z0ffM2.jpg" alt="벨레나 고백" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>불타는 고백</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/JxRJOoU.jpg" alt="벨레나의 소장품" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>영원한 소장품</p>
                    </div>
                </div>
            </div>

            <div id="lilia-guide" class="tab-content">
                <h2>❤️ 릴리아 공략 가이드</h2>
                <div class="character-profile">
                    <img src="https://imgur.com/Um2oHzg.jpg" alt="릴리아 프로필" onerror="this.onerror=null;this.src='https://placehold.co/240x290/330044/ffffff?text=Image+Error';">
                    <div class="profile-info-content">
                        <h3>릴리아 (Lilia)</h3>
                        <div class="profile-details">
                            <div class="detail-item"><b>특성:</b> 유혹, 관능, 지식</div>
                            <div class="detail-item"><b>마법:</b> 환상 마법, 금지된 마법</div>
                            <div class="detail-item"><b>좋아하는 것:</b> 금지된 지식, 새로운 감각, 지적인 대화, 탐닉.</div>
                            <div class="detail-item"><b>싫어하는 것:</b> 지루함, 단순함, 위선, 속박.</div>
                        </div>
                        <p class="profile-section-title">릴리아 공략 포인트</p>
                        <p>릴리아는 치명적인 유혹과 금지된 지식을 탐하는 마녀입니다. 그녀의 매혹적인 분위기에 굴복하고, 그녀가 추구하는 미지의 영역에 함께 발을 들여놓으세요. 그녀의 지적인 호기심을 자극하고, 그녀의 가장 깊은 욕망을 함께 탐닉하면 그녀의 마음을 사로잡을 수 있습니다. 그녀의 붉은 문신에 담긴 비밀을 풀어보세요.</p>
                    </div>
                </div>

                <h3>릴리아 에피소드 일러스트</h3>
                <div class="image-gallery">
                    <div class="image-item">
                        <img src="https://imgur.com/soKOWmI.jpg" alt="연무 속 관능극" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>연무 속 관능</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/cC5Zhq5.jpg" alt="빗속의 관능" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>빗속의 유혹</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/VQOhkVl.jpg" alt="은월의 정원" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>은월의 정원</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/FCMW94N.jpg" alt="릴리아 갈등" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>어둠의 줄다리기</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/c2jsDbr.jpg" alt="릴리아 고백" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>깊은 유혹</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/qlRCEk5.jpg" alt="영원한 환상" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>영원한 환상</p>
                    </div>
                </div>
            </div>

            <div id="celine-guide" class="tab-content">
                <h2>💙 셀린 공략 가이드</h2>
                <div class="character-profile">
                    <img src="https://imgur.com/ZY3KYg4.jpg" alt="셀린 프로필" onerror="this.onerror=null;this.src='https://placehold.co/240x290/330044/ffffff?text=Image+Error';">
                    <div class="profile-info-content">
                        <h3>셀린 (Celine)</h3>
                        <div class="profile-details">
                            <div class="detail-item"><b>특성:</b> 순수, 치유, 보호</div>
                            <div class="detail-item"><b>마법:</b> 치유 마법, 보호 마법</div>
                            <div class="detail-item"><b>좋아하는 것:</b> 따뜻함, 안전, 약초 채집, 진심 어린 위로.</div>
                            <div class="detail-item"><b>싫어하는 것:</b> 폭력, 거짓말, 위험, 갈등.</div>
                        </div>
                        <p class="profile-section-title">셀린 공략 포인트</p>
                        <p>셀린은 순수하고 여린 마음을 가진 치유사 마녀입니다. 그녀의 불안감을 덜어주고, 그녀의 선의를 믿어주세요. 그녀가 위험에 처했을 때 보호해주고, 그녀의 따뜻한 손길을 기꺼이 받아들이면 그녀의 순수한 사랑을 얻을 수 있습니다. 그녀의 맑은 눈동자에 담긴 진심을 느껴보세요.</p>
                    </div>
                </div>

                <h3>셀린 에피소드 일러스트</h3>
                <div class="image-gallery">
                    <div class="image-item">
                        <img src="https://imgur.com/1iBPqHp.jpg" alt="깨진 보호막 (셀린 등장)" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>깨진 보호막</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/ncFuyHP.jpg" alt="금단의 회복" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>금단의 치유</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/V2mqWbE.jpg" alt="순수한 손길" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>순수한 손길</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/rL8unZ8.jpg" alt="셀린 보호막" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>믿음의 시험</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/cfunOtC.jpg" alt="셀린 갈등" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>순수의 시험</p>
                    </div>
                    <div class="image-item">
                        <img src="https://imgur.com/zwF6DVH.jpg" alt="영원한 맹세" onerror="this.onerror=null;this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error';">
                        <p>영원한 맹세</p>
                    </div>
                </div>
            </div>

            <div id="endings" class="tab-content">
                <h2>모든 엔딩을 향한 여정</h2>
                <p>금단의 유혹: 마녀의 밤에는 당신의 선택에 따라 다채로운 엔딩이 기다리고 있습니다. 각 마녀와의 뜨거운 해피 엔딩부터, 치명적인 에로 엔딩, 때로는 씁쓸한 배드 엔딩, 그리고 숨겨진 트루 엔딩까지!</p>

                <div class="ending-section">
                    <h3>🖤 벨레나 엔딩</h3>
                    <p>벨레나의 지배력을 최대로 쌓고, 그녀의 뜨거운 욕망에 진심으로 화답하세요. 그녀의 가장 귀한 소장품이 되어 영원한 지배를 함께하거나, 금단의 쾌락 속에서 그녀의 모든 것을 탐닉할 수 있습니다.</p>
                    <div class="image-gallery">
                        <div class="image-item">
                            <img src="https://imgur.com/UHiLb1Z.jpg" alt="벨레나 해피 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>해피 엔딩: 영원한 지배</p>
                        </div>
                        <div class="image-item">
                            <img src="https://github.com/heyrichoi/witch/blob/main/pixai-1906547944971113554-3.png?raw=true" alt="벨레나 에로 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>에로 엔딩: 금단의 쾌락</p>
                        </div>
                        <div class="image-item">
                            <img src="https://imgur.com/LRAnmpb.jpg" alt="벨레나 배드 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>배드 엔딩: 잃어버린 지배</p>
                        </div>
                        <div class="image-item">
                            <img src="https://imgur.com/2B9q32N.jpg" alt="벨레나 NTR 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>배드 엔딩: 놓쳐버린 유혹</p>
                        </div>
                    </div>
                </div>

                <div class="ending-section">
                    <h3>❤️ 릴리아 엔딩</h3>
                    <p>릴리아의 유혹력을 최대로 쌓고, 그녀의 치명적인 매력에 진심으로 응답하세요. 그녀와 함께 금지된 마법과 사랑 모두에서 뜨거운 성공을 거두거나, 끝없는 쾌락 속에서 영원히 탐닉할 수 있습니다.</p>
                    <div class="image-gallery">
                        <div class="image-item">
                            <img src="https://imgur.com/6ruDZ1p.jpg" alt="릴리아 해피 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>해피 엔딩: 영원한 환상</p>
                        </div>
                        <div class="image-item">
                            <img src="https://github.com/heyrichoi/witch/blob/main/pixai-1906533195007341902-3.png?raw=true" alt="릴리아 에로 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>에로 엔딩: 탐닉의 밤</p>
                        </div>
                        <div class="image-item">
                            <img src="https://imgur.com/baQhjAA.jpg" alt="릴리아 배드 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>배드 엔딩: 깨진 유혹</p>
                        </div>
                    </div>
                </div>

                <div class="ending-section">
                    <h3>💙 셀린 엔딩</h3>
                    <p>셀린의 순수도를 최대로 쌓고, 그녀의 섬세하고 따뜻한 마음에 진심으로 다가가세요. 그녀와 함께 서로를 치유하며 행복한 미래를 만들거나, 그녀의 순수한 마음을 타락시키며 금단의 쾌락을 탐닉할 수 있습니다.</p>
                    <div class="image-gallery">
                        <div class="image-item">
                            <img src="https://imgur.com/3U2ipmv.jpg" alt="셀린 해피 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>해피 엔딩: 따뜻한 미래</p>
                        </div>
                        <div class="image-item">
                            <img src="https://imgur.com/LKsDrEB.jpg" alt="셀린 에로 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>에로 엔딩: 순수의 타락</p>
                        </div>
                        <div class="image-item">
                            <img src="https://imgur.com/3vFGxOK.jpg" alt="셀린 배드 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>배드 엔딩: 멀어진 순수</p>
                        </div>
                    </div>
                </div>

                <div class="ending-section">
                    <h3>✨ 트루 엔딩: 운명을 함께하는 계약</h3>
                    <p>세 마녀 모두와 균형 잡힌 높은 호감도를 유지하고, 마력 또한 일정 수준 이상으로 완벽하게 관리했을 때만 도달할 수 있는 특별한 엔딩입니다. 세 마녀 모두를 당신의 것으로 만들고, 금단의 하렘을 건설하세요!</p>
                    <div class="image-gallery">
                        <div class="image-item">
                            <img src="https://imgur.com/XBR4S8N.jpg" alt="트루 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>운명을 함께하는 계약</p>
                        </div>
                    </div>
                </div>

                <div class="ending-section">
                    <h3>💔 일반 배드 엔딩: 어둠 속 방황</h3>
                    <p>어떤 마녀와도 깊은 관계를 맺지 못했거나, 마력 관리에 실패했을 때 맞이하는 엔딩입니다. 마녀들의 세계에서 길을 잃고, 외로운 밤을 보내게 될 것입니다.</p>
                    <div class="image-gallery">
                        <div class="image-item">
                            <img src="https://imgur.com/tzUfVzs.jpg" alt="실패 엔딩" onerror="this.onerror=null;this.src='https://placehold.co/350x260/330044/ffffff?text=Image+Error';">
                            <p>어둠 속 방황</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="erotic-gallery-tab" class="tab-content">
                <h2>더 에로한 일러스트 확인하기</h2>
                <p>비밀스러운 밤의 유혹을 담은 특별 일러스트들을 감상하세요. (비밀번호: 3060)</p>
                <div class="image-gallery" id="eroticGalleryGrid">
                    <!-- Erotic illustrations will be loaded here via JS after password check -->
                </div>
            </div>

            <footer>
                <p>이 공략집이 당신의 '금단의 유혹: 마녀의 밤' 플레이에 도움이 되기를 바랍니다! 😈</p>
                <p>모든 엔딩을 수집하고, 마녀들의 밤을 지배하세요!</p>
            </footer>
        </main>
    </div>

    <!-- Image Overlay Structure -->
    <div id="image-overlay">
        <img src="" alt="확대된 이미지">
    </div>

    <!-- Password Modal -->
    <div class="password-modal-overlay" id="passwordModalOverlay">
        <div class="password-modal-content">
            <h3>비밀번호 입력</h3>
            <p>이 갤러리는 특별한 기억을 담고 있습니다.</p>
            <input type="password" id="passwordInput" placeholder="비밀번호를 입력하세요">
            <div class="error-message" id="passwordErrorMessage"></div>
            <button id="passwordSubmitButton">확인</button>
        </div>
    </div>

    <script>
        // 이미지 URLs (게임 코드에서 가져옴)
        const IMAGE_URLS = {
            // 게임 시스템
            GAME_LOGO: "https://imgur.com/wvwkRJr.jpg",
            OPENING_ILLUST: "https://imgur.com/D40eRow.jpg",

            // 캐릭터 기본 이미지
            BELENA_BASE: "https://imgur.com/unTnIQB.jpg",
            LILIA_BASE: "https://imgur.com/Um2oHzg.jpg",
            CELINE_BASE: "https://imgur.com/ZY3KYg4.jpg",

            // 배경 이미지
            DARK_FOREST: "https://imgur.com/NIzVNZH.jpg", // 어두운 숲
            RUINED_CASTLE: "https://imgur.com/Pi6xXrK.jpg", // 폐허가 된 성 (마녀들의 거점)
            MYSTERY_STREET: "https://imgur.com/U88KHR6.jpg", // 신비로운 거리 낮
            MOONLIT_PATH: "https://imgur.com/aHnvTE7.jpg", // 달빛 비치는 길 (밤)
            FORBIDDEN_ALTAR: "https://imgur.com/KnUQcZd.jpg", // 금단의 제단 (벨레나 의식)
            SECRET_CAVE: "https://imgur.com/r2EeiEc.jpg", // 비밀 동굴 (마녀들의 연회)
            SACRED_GROVE: "https://imgur.com/1WKUdiZ.jpg", // 신성한 숲 (셀린 약초 채집)
            ANCIENT_LIBRARY: "https://imgur.com/I7AQ0LS.jpg", // 고대 도서관 (릴리아 연구)

            // 벨레나 특별 이벤트 일러스트
            BELENA_CAPTURED: "https://imgur.com/uvBZwBa.jpg", // 벨레나의 함정에 걸림
            BELENA_CONTRACT_SCENE: "https://imgur.com/TJQX9PS.jpg", // 명계의 계약서
            BELENA_RITUAL_CUT: "https://imgur.com/9gf3RQj.jpg", // 붉은 의식의 방
            BELENA_DOMINANCE_CUT: "https://imgur.com/uW2fEpz.jpg", // 벨레나 지배의 카리스마
            BELENA_CONFESSION_CUT: "https://imgur.com/3Z0ffM2.jpg", // 벨레나 고백
            BELENA_COLLECTION_END: "https://imgur.com/JxRJOoU.jpg", // 벨레나의 소장품 (엔딩)

            // 릴리아 특별 이벤트 일러스트
            LILIA_SEDUCTION_CUT: "https://imgur.com/soKOWmI.jpg", // 연무 속 관능극
            LILIA_MIST_CUT: "https://imgur.com/cC5Zhq5.jpg", // 빗속의 관능
            LILIA_GARDEN_CUT: "https://imgur.com/VQOhkVl.jpg", // 은월의 정원
            LILIA_CONFLICT_CUT: "https://imgur.com/FCMW94N.jpg", // 릴리아 갈등
            LILIA_CONFESSION_CUT: "https://imgur.com/c2jsDbr.jpg", // 릴리아 고백
            LILIA_ETERNAL_END: "https://imgur.com/qlRCEk5.jpg", // 영원한 환상 (엔딩)

            // 셀린 특별 이벤트 일러스트
            CELINE_RESCUE: "https://imgur.com/1iBPqHp.jpg", // 깨진 보호막 (셀린 등장)
            CELINE_HEALING_CUT: "https://imgur.com/ncFuyHP.jpg", // 금단의 회복
            CELINE_PURE_TOUCH_CUT: "https://imgur.com/V2mqWbE.jpg", // 순수한 손길
            CELINE_SHIELD_CUT: "https://imgur.com/rL8unZ8.jpg", // 셀린 보호막
            CELINE_CONFLICT_CUT: "https://imgur.com/cfunOtC.jpg", // 셀린 갈등
            CELINE_MARRIAGE: "https://imgur.com/zwF6DVH.jpg", // 영원한 맹세 (엔딩)
            CELINE_EMOTION_END: "https://imgur.com/Drzqwbv.jpg", // 눈을 감고 피어난 감정 (엔딩)

            // 트루 루트 이미지 (세 마녀의 심판 - 3개 이미지로 분리)
            THREE_WITCHES_JUDGMENT_1: "https://imgur.com/bIcCVJU.jpg",
            THREE_WITCHES_JUDGMENT_2: "https://imgur.com/6eKEgJY.jpg",
            THREE_WITCHES_JUDGMENT_3: "https://imgur.com/jYhpdeb.jpg",
            TRUE_CONTRACT_END: "https://imgur.com/XBR4S8N.jpg",

            // 엔딩 일러스트
            BELENA_HAPPY_END: "https://imgur.com/UHiLb1Z.jpg",
            LILIA_HAPPY_END: "https://imgur.com/6ruDZ1p.jpg",
            CELINE_HAPPY_END: "https://imgur.com/3U2ipmv.jpg",
            BELENA_EROTIC_END: "https://github.com/heyrichoi/witch/blob/main/pixai-1906547944971113554-3.png?raw=true", // 벨레나 에로 엔딩 (UPDATED)
            LILIA_EROTIC_END: "https://github.com/heyrichoi/witch/blob/main/pixai-1906533195007341902-3.png?raw=true",    // 릴리아 에로 엔딩 (UPDATED)
            CELINE_EROTIC_END: "https://imgur.com/LKsDrEB.jpg",  // 셀린 에로 엔딩
            BELENA_BAD_END: "https://imgur.com/LRAnmpb.jpg",
            LILIA_BAD_END: "https://imgur.com/baQhjAA.jpg",
            CELINE_BAD_END: "https://imgur.com/3vFGxOK.jpg",
            BELENA_NTR_ILLUST: "https://imgur.com/xObcvPt.jpg", // 벨레나 NTR 에피소드
            BELENA_NTR_FINAL_END: "https://imgur.com/2B9q32N.jpg", // 벨레나 NTR 최종 엔딩
            FAILURE_END: "https://imgur.com/tzUfVzs.jpg", // 실패 엔딩

            // 추가 에로 일러스트 (NEW)
            EROTIC_ADD_1: "https://imgur.com/8UMC5uN.jpg",
            EROTIC_ADD_2: "https://imgur.com/YT4aeIe.jpg",
            EROTIC_ADD_3: "https://imgur.com/IOGQjH7.jpg",
            EROTIC_ADD_4: "https://imgur.com/nERlZKQ.jpg",
            EROTIC_ADD_5: "https://imgur.com/mKBKjhZ.jpg",
            EROTIC_ADD_6: "https://imgur.com/ZqgGMTu.jpg",
            EROTIC_ADD_7: "https://imgur.com/mcnfSi5.jpg",
            EROTIC_ADD_8: "https://imgur.com/8ftiNK4.jpg",
            EROTIC_ADD_9: "https://imgur.com/1Lkz9sR.jpg",
            EROTIC_ADD_10: "https://imgur.com/IRmPCIG.jpg",
            EROTIC_ADD_11: "https://imgur.com/hT9h9uR.jpg",
            EROTIC_ADD_12: "https://imgur.com/MdqlN4T.jpg",
            EROTIC_ADD_13: "https://imgur.com/IX7ZOQ7.jpg",
            EROTIC_ADD_14: "https://imgur.com/jzZcb2O.jpg",
            EROTIC_ADD_15: "https://imgur.com/xL0AEJT.jpg",
            EROTIC_ADD_16: "https://imgur.com/yghGr5v.jpg"
        };

        // 갤러리에 표시될 일러스트 목록과 이름 (IMAGE_URLS의 키와 매핑)
        const GALLERY_ILLUST_MAP = {
            "BELENA_CAPTURED": "벨레나: 숲의 속박",
            "LILIA_SEDUCTION_CUT": "릴리아: 연무 속 관능",
            "CELINE_RESCUE": "셀린: 깨진 보호막",
            "BELENA_CONTRACT_SCENE": "벨레나: 명계의 계약",
            "LILIA_MIST_CUT": "릴리아: 빗속의 유혹",
            "CELINE_HEALING_CUT": "셀린: 금단의 치유",
            "BELENA_RITUAL_CUT": "벨레나: 붉은 의식",
            "LILIA_GARDEN_CUT": "릴리아: 은월의 정원",
            "CELINE_PURE_TOUCH_CUT": "셀린: 순수한 손길",
            "BELENA_DOMINANCE_CUT": "벨레나: 지배의 카리스마",
            "LILIA_CONFLICT_CUT": "릴리아: 어둠의 줄다리기",
            "CELINE_CONFLICT_CUT": "셀린: 순수의 시험",
            "BELENA_CONFESSION_CUT": "벨레나: 불타는 고백",
            "LILIA_CONFESSION_CUT": "릴리아: 깊은 유혹",
            "CELINE_MARRIAGE": "셀린: 영원한 맹세",
            "THREE_WITCHES_JUDGMENT_1": "트루: 벨레나의 심판",
            "THREE_WITCHES_JUDGMENT_2": "트루: 릴리아의 심판",
            "THREE_WITCHES_JUDGMENT_3": "트루: 셀린의 심판",
            "TRUE_CONTRACT_END": "트루: 운명을 함께하는 계약",
            "BELENA_HAPPY_END": "벨레나: 영원한 지배",
            "LILIA_HAPPY_END": "릴리아: 영원한 환상",
            "CELINE_HAPPY_END": "셀린: 따뜻한 미래",
            "BELENA_EROTIC_END": "벨레나: 금단의 쾌락",
            "LILIA_EROTIC_END": "릴리아: 탐닉의 밤",
            "CELINE_EROTIC_END": "셀린: 순수의 타락",
            "BELENA_BAD_END": "벨레나: 잃어버린 지배",
            "LILIA_BAD_END": "릴리아: 깨진 유혹",
            "CELINE_BAD_END": "셀린: 멀어진 순수",
            "BELENA_NTR_ILLUST": "벨레나: 씁쓸한 미소",
            "BELENA_NTR_FINAL_END": "벨레나: 놓쳐버린 유혹",
            "FAILURE_END": "실패: 어둠 속 방황"
        };

        // NEW: 에로틱 갤러리 전용 일러스트 맵
        const EROTIC_GALLERY_ILLUST_MAP = {
            "EROTIC_ADD_1": "금단의 유혹 1",
            "EROTIC_ADD_2": "금단의 유혹 2",
            "EROTIC_ADD_3": "금단의 유혹 3",
            "EROTIC_ADD_4": "금단의 유혹 4",
            "EROTIC_ADD_5": "금단의 유혹 5",
            "EROTIC_ADD_6": "금단의 유혹 6",
            "EROTIC_ADD_7": "금단의 유혹 7",
            "EROTIC_ADD_8": "금단의 유혹 8",
            "EROTIC_ADD_9": "금단의 유혹 9",
            "EROTIC_ADD_10": "금단의 유혹 10",
            "EROTIC_ADD_11": "금단의 유혹 11",
            "EROTIC_ADD_12": "금단의 유혹 12",
            "EROTIC_ADD_13": "금단의 유혹 13",
            "EROTIC_ADD_14": "금단의 유혹 14",
            "EROTIC_ADD_15": "금단의 유혹 15",
            "EROTIC_ADD_16": "금단의 유혹 16"
        };


        // DOM 요소 가져오기
        // const galleryGrid = document.querySelector('#gallery-tab .image-gallery'); // REMOVED
        const eroticGalleryGrid = document.getElementById('eroticGalleryGrid'); // NEW
        const imageOverlay = document.getElementById('image-overlay');
        const overlayImage = imageOverlay.querySelector('img');
        const eroticGalleryButton = document.getElementById('eroticGalleryButton'); // NEW
        const passwordModalOverlay = document.getElementById('passwordModalOverlay'); // NEW
        const passwordInput = document.getElementById('passwordInput'); // NEW
        const passwordSubmitButton = document.getElementById('passwordSubmitButton'); // NEW
        const passwordErrorMessage = document.getElementById('passwordErrorMessage'); // NEW

        const EROTIC_GALLERY_PASSWORD = "3060"; // NEW: 비밀번호
        let isEroticGalleryUnlocked = false; // NEW: 갤러리 잠금 해제 여부

        // Function to open a specific tab
        function openTab(evt, tabName) {
            // Hide all tab content
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
                tabcontent[i].classList.remove("active");
            }

            // Remove 'active' class from all tab buttons
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }

            // Show the current tab content and add 'active' class to the clicked button
            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");

            // If erotic gallery tab is opened, render it
            if (tabName === 'erotic-gallery-tab') {
                renderGallery(eroticGalleryGrid, EROTIC_GALLERY_ILLUST_MAP, true); // Pass isErotic=true
            }
        }

        // Function to show the image overlay
        function showImageOverlay(imageUrl) {
            overlayImage.src = imageUrl;
            imageOverlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling when overlay is active
        }

        // Function to hide the image overlay
        function hideImageOverlay() {
            imageOverlay.classList.remove('active');
            overlayImage.src = ''; // Clear image source to save memory
            document.body.style.overflow = ''; // Restore scrolling
        }

        // Close overlay on click anywhere on the overlay
        imageOverlay.addEventListener('click', hideImageOverlay);

        // Close overlay on Esc key press
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && imageOverlay.classList.contains('active')) {
                hideImageOverlay();
            }
        });

        // Sparkle effect JavaScript (from previous guide)
        function createSparkle(x, y, color, size, duration, offsetX = 0, offsetY = 0) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = `${x + offsetX}px`;
            sparkle.style.top = `${y + offsetY}px`;
            sparkle.style.backgroundColor = color;
            sparkle.style.width = `${size}px`;
            sparkle.style.height = `${size}px`;
            sparkle.style.animationDuration = `${duration}s`;
            document.body.appendChild(sparkle);

            // Remove sparkle after animation to prevent DOM clutter
            sparkle.addEventListener('animationend', () => {
                sparkle.remove();
            });
        }

        // Mousemove sparkle effect (subtle, frequent)
        document.addEventListener('mousemove', (e) => {
            if (Math.random() < 0.3) {
                const colors = ['#ffffff', 'var(--light-purple)', 'var(--primary-purple)'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                const randomSize = Math.random() * 3 + 2;
                const randomDuration = Math.random() * 0.4 + 0.4;
                createSparkle(e.clientX, e.clientY, randomColor, randomSize, randomDuration);
            }
        });

        // Click sparkle effect (more pronounced burst)
        document.addEventListener('click', (e) => {
            const numSparkles = 20;
            let startX = e.clientX;
            let startY = e.clientY;
            let spread = 150;

            if (e.target.tagName === 'BUTTON') {
                const rect = e.target.getBoundingClientRect();
                startX = rect.left + rect.width / 2;
                startY = rect.top + rect.height / 2;
                spread = Math.max(rect.width, rect.height) * 1.5;
            }

            for (let i = 0; i < numSparkles; i++) {
                const colors = ['#ffffff', 'var(--primary-purple)', 'var(--light-purple)', 'var(--accent-red)', 'var(--accent-blue)'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                const randomSize = Math.random() * 12 + 6;
                const randomDuration = Math.random() * 1.2 + 0.6;

                const offsetX = (Math.random() - 0.5) * spread;
                const offsetY = (Math.random() - 0.5) * spread;

                createSparkle(startX, startY, randomColor, randomSize, randomDuration, offsetX, offsetY);
            }
        });

        // --- Gallery Specific Logic ---
        const COLLECTED_ILLUSTS_KEY = 'witch_romance_collected_illusts'; // Key from the game code

        // Dummy collectedIllusts for guide purposes. In a real scenario, this would be loaded from localStorage.
        let collectedIllusts = {};
        // Initialize all as uncollected for the guide, or load from storage if game is also running
        function loadCollectedIllustsForGuide() {
            const savedData = localStorage.getItem(COLLECTED_ILLUSTS_KEY);
            if (savedData) {
                collectedIllusts = JSON.parse(savedData);
            } else {
                for (const key in GALLERY_ILLUST_MAP) {
                    collectedIllusts[key] = false; // All uncollected by default for the guide
                }
            }
        }

        // Modified renderGallery to accept targetGrid and illustMap, and a flag for erotic gallery
        function renderGallery(targetGrid, illustMap, isErotic) {
            targetGrid.innerHTML = ''; // Clear existing items
            let collectedCount = 0;
            const totalIllusts = Object.keys(illustMap).length;

            for (const key in illustMap) {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('image-item');

                const itemName = document.createElement('p');
                itemName.classList.add('item-name');

                // For erotic gallery, all are "collected" if unlocked
                // For normal gallery, check collectedIllusts from game save
                const isCollected = isErotic ? isEroticGalleryUnlocked : collectedIllusts[key];

                if (isCollected) {
                    collectedCount++;
                    const img = document.createElement('img');
                    img.src = IMAGE_URLS[key];
                    img.alt = illustMap[key];
                    img.onerror = function() { this.onerror=null; this.src='https://placehold.co/180x135/330044/ffffff?text=Image+Error'; };
                    itemDiv.appendChild(img);
                    itemName.textContent = illustMap[key];
                    itemDiv.appendChild(itemName);

                    itemDiv.onclick = () => showImageOverlay(IMAGE_URLS[key]);
                } else {
                    itemDiv.classList.add('uncollected');
                    const hiddenImageContainer = document.createElement('div');
                    hiddenImageContainer.classList.add('hidden-image-container');
                    const img = document.createElement('img');
                    img.src = 'https://placehold.co/180x135/330044/ffffff?text=Locked';
                    img.alt = '잠금';
                    hiddenImageContainer.appendChild(img);
                    const overlayDiv = document.createElement('div');
                    overlayDiv.classList.add('hidden-image-overlay');
                    overlayDiv.textContent = '?';
                    hiddenImageContainer.appendChild(overlayDiv);
                    itemDiv.appendChild(hiddenImageContainer);
                    itemName.textContent = "???";
                    itemDiv.appendChild(itemName);
                }
                targetGrid.appendChild(itemDiv);
            }

            // You can add a progress bar here if needed for each gallery type
        }

        // NEW: Password modal logic
        eroticGalleryButton.addEventListener('click', (event) => {
            event.preventDefault(); // Prevent default tab behavior
            if (isEroticGalleryUnlocked) {
                openTab(event, 'erotic-gallery-tab');
            } else {
                passwordModalOverlay.classList.add('active');
                passwordInput.value = ''; // Clear previous input
                passwordErrorMessage.textContent = ''; // Clear previous error
                passwordInput.focus(); // Focus on input field
            }
        });

        passwordSubmitButton.addEventListener('click', () => {
            const enteredPassword = passwordInput.value;
            if (enteredPassword === EROTIC_GALLERY_PASSWORD) {
                isEroticGalleryUnlocked = true;
                passwordModalOverlay.classList.remove('active');
                // Manually trigger the tab opening after successful unlock
                const customEvent = new Event('click');
                eroticGalleryButton.dispatchEvent(customEvent);
            } else {
                passwordErrorMessage.textContent = "비밀번호가 틀렸습니다. 다시 시도하세요.";
            }
        });

        // Allow closing modal by clicking outside or pressing Esc (if not submitting)
        passwordModalOverlay.addEventListener('click', (event) => {
            if (event.target === passwordModalOverlay) {
                passwordModalOverlay.classList.remove('active');
            }
        });
        passwordInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                passwordSubmitButton.click();
            }
        });


        // On page load
        document.addEventListener("DOMContentLoaded", function() {
            // Activate the first tab on page load
            document.querySelector(".tab-button").click();
            loadCollectedIllustsForGuide(); // Load collected illusts for the guide
        });
    </script>
</body>
</html>
